<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Psych</title>
  <meta name="description" content="An introduction to data management and analysis for psychological research using R.">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="R for Psych" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://glennwilliams.me/r4psych/" />
  
  <meta property="og:description" content="An introduction to data management and analysis for psychological research using R." />
  <meta name="github-repo" content="gpwilliams/r4psych" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Psych" />
  
  <meta name="twitter:description" content="An introduction to data management and analysis for psychological research using R." />
  

<meta name="author" content="Glenn Williams">


<meta name="date" content="2018-03-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-manipulation-1.html">
<link rel="next" href="traditional-tests.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Psych</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface &amp; Overview</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#installation-and-setup"><i class="fa fa-check"></i><b>1.1</b> Installation and Setup</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#working-directory-and-file-paths"><i class="fa fa-check"></i><b>1.2</b> Working Directory and File Paths</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>1.3</b> Packages</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#objects-and-functions"><i class="fa fa-check"></i><b>1.4</b> Objects and Functions</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#creating-and-accessing-data"><i class="fa fa-check"></i><b>1.5</b> Creating and Accessing Data</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#good-practice"><i class="fa fa-check"></i><b>1.6</b> Good Practice</a><ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#data-checking-tips"><i class="fa fa-check"></i><b>1.6.1</b> Data Checking Tips</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction.html"><a href="introduction.html#style"><i class="fa fa-check"></i><b>1.6.2</b> Style</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#exercises"><i class="fa fa-check"></i><b>1.7</b> Exercises</a><ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#question-1"><i class="fa fa-check"></i><b>1.7.1</b> Question 1</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#question-2"><i class="fa fa-check"></i><b>1.7.2</b> Question 2</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction.html"><a href="introduction.html#question-3"><i class="fa fa-check"></i><b>1.7.3</b> Question 3</a></li>
<li class="chapter" data-level="1.7.4" data-path="introduction.html"><a href="introduction.html#question-4"><i class="fa fa-check"></i><b>1.7.4</b> Question 4</a></li>
<li class="chapter" data-level="1.7.5" data-path="introduction.html"><a href="introduction.html#question-5"><i class="fa fa-check"></i><b>1.7.5</b> Question 5</a></li>
<li class="chapter" data-level="1.7.6" data-path="introduction.html"><a href="introduction.html#question-6"><i class="fa fa-check"></i><b>1.7.6</b> Question 6</a></li>
<li class="chapter" data-level="1.7.7" data-path="introduction.html"><a href="introduction.html#question-7"><i class="fa fa-check"></i><b>1.7.7</b> Question 7</a></li>
<li class="chapter" data-level="1.7.8" data-path="introduction.html"><a href="introduction.html#question-8"><i class="fa fa-check"></i><b>1.7.8</b> Question 8</a></li>
<li class="chapter" data-level="1.7.9" data-path="introduction.html"><a href="introduction.html#question-9"><i class="fa fa-check"></i><b>1.7.9</b> Question 9</a></li>
<li class="chapter" data-level="1.7.10" data-path="introduction.html"><a href="introduction.html#question-10"><i class="fa fa-check"></i><b>1.7.10</b> Question 10</a></li>
<li class="chapter" data-level="1.7.11" data-path="introduction.html"><a href="introduction.html#question-11"><i class="fa fa-check"></i><b>1.7.11</b> Question 11</a></li>
<li class="chapter" data-level="1.7.12" data-path="introduction.html"><a href="introduction.html#question-12"><i class="fa fa-check"></i><b>1.7.12</b> Question 12</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html"><i class="fa fa-check"></i><b>2</b> Data Visualisation 1</a><ul>
<li class="chapter" data-level="2.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#getting-started"><i class="fa fa-check"></i><b>2.1</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#the-star-wars-tibble"><i class="fa fa-check"></i><b>2.1.1</b> The Star Wars Tibble</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#plotting-in-ggplot2"><i class="fa fa-check"></i><b>2.1.2</b> Plotting in ggplot2</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#cleaning-before-plotting"><i class="fa fa-check"></i><b>2.1.3</b> Cleaning Before Plotting</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#changing-your-aesthetics"><i class="fa fa-check"></i><b>2.1.4</b> Changing Your Aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#exploring-different-geoms"><i class="fa fa-check"></i><b>2.2</b> Exploring Different Geoms</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#bar-plots"><i class="fa fa-check"></i><b>2.2.1</b> Bar Plots</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#box-plots"><i class="fa fa-check"></i><b>2.2.2</b> Box Plots</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#violin-plots"><i class="fa fa-check"></i><b>2.2.3</b> Violin Plots</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#density-plots"><i class="fa fa-check"></i><b>2.2.4</b> Density Plots</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#histograms"><i class="fa fa-check"></i><b>2.2.5</b> Histograms</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#exercises-1"><i class="fa fa-check"></i><b>2.3</b> Exercises</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#main-exercises"><i class="fa fa-check"></i><b>2.3.1</b> Main Exercises</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-1-1"><i class="fa fa-check"></i><b>2.3.2</b> Question 1</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-2-1"><i class="fa fa-check"></i><b>2.3.3</b> Question 2</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-3-1"><i class="fa fa-check"></i><b>2.3.4</b> Question 3</a></li>
<li class="chapter" data-level="2.3.5" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-4-1"><i class="fa fa-check"></i><b>2.3.5</b> Question 4</a></li>
<li class="chapter" data-level="2.3.6" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-5-1"><i class="fa fa-check"></i><b>2.3.6</b> Question 5</a></li>
<li class="chapter" data-level="2.3.7" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-6-1"><i class="fa fa-check"></i><b>2.3.7</b> Question 6</a></li>
<li class="chapter" data-level="2.3.8" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-7-1"><i class="fa fa-check"></i><b>2.3.8</b> Question 7</a></li>
<li class="chapter" data-level="2.3.9" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-8-1"><i class="fa fa-check"></i><b>2.3.9</b> Question 8</a></li>
<li class="chapter" data-level="2.3.10" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-9-1"><i class="fa fa-check"></i><b>2.3.10</b> Question 9</a></li>
<li class="chapter" data-level="2.3.11" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#question-10-1"><i class="fa fa-check"></i><b>2.3.11</b> Question 10</a></li>
<li class="chapter" data-level="2.3.12" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#additional-exercise"><i class="fa fa-check"></i><b>2.3.12</b> Additional Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html"><i class="fa fa-check"></i><b>3</b> Data Visualisation 2</a><ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#customising-your-plots"><i class="fa fa-check"></i><b>3.1</b> Customising Your Plots</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#pirate-plots"><i class="fa fa-check"></i><b>3.2</b> Pirate Plots</a></li>
<li class="chapter" data-level="3.3" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#faceting"><i class="fa fa-check"></i><b>3.3</b> Faceting</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#facet-wrap"><i class="fa fa-check"></i><b>3.3.1</b> Facet Wrap</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#facet-grid"><i class="fa fa-check"></i><b>3.3.2</b> Facet Grid</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#calculating-statisitcs-in-ggplot2"><i class="fa fa-check"></i><b>3.4</b> Calculating Statisitcs in ggplot2</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#means-and-error-bars"><i class="fa fa-check"></i><b>3.4.1</b> Means and Error Bars</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#model-fits"><i class="fa fa-check"></i><b>3.4.2</b> Model Fits</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#combining-plots"><i class="fa fa-check"></i><b>3.5</b> Combining Plots</a></li>
<li class="chapter" data-level="3.6" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#saving-plots"><i class="fa fa-check"></i><b>3.6</b> Saving Plots</a></li>
<li class="chapter" data-level="3.7" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#exercises-2"><i class="fa fa-check"></i><b>3.7</b> Exercises</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#main-exercises-1"><i class="fa fa-check"></i><b>3.7.1</b> Main Exercises</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-1-2"><i class="fa fa-check"></i><b>3.7.2</b> Question 1</a></li>
<li class="chapter" data-level="3.7.3" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-2-2"><i class="fa fa-check"></i><b>3.7.3</b> Question 2</a></li>
<li class="chapter" data-level="3.7.4" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-3-2"><i class="fa fa-check"></i><b>3.7.4</b> Question 3</a></li>
<li class="chapter" data-level="3.7.5" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-4-2"><i class="fa fa-check"></i><b>3.7.5</b> Question 4</a></li>
<li class="chapter" data-level="3.7.6" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-5-2"><i class="fa fa-check"></i><b>3.7.6</b> Question 5</a></li>
<li class="chapter" data-level="3.7.7" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-6-2"><i class="fa fa-check"></i><b>3.7.7</b> Question 6</a></li>
<li class="chapter" data-level="3.7.8" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-7-2"><i class="fa fa-check"></i><b>3.7.8</b> Question 7</a></li>
<li class="chapter" data-level="3.7.9" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-8-2"><i class="fa fa-check"></i><b>3.7.9</b> Question 8</a></li>
<li class="chapter" data-level="3.7.10" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#question-9-2"><i class="fa fa-check"></i><b>3.7.10</b> Question 9</a></li>
<li class="chapter" data-level="3.7.11" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#additional-exercise-1"><i class="fa fa-check"></i><b>3.7.11</b> Additional Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation 1</a><ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#getting-started-1"><i class="fa fa-check"></i><b>4.1</b> Getting Started</a></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#data-formats"><i class="fa fa-check"></i><b>4.2</b> Data Formats</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#loading-data"><i class="fa fa-check"></i><b>4.2.1</b> Loading Data</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#wide-and-long-data"><i class="fa fa-check"></i><b>4.2.2</b> Wide and Long Data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#reformatting-data"><i class="fa fa-check"></i><b>4.3</b> Reformatting Data</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#gathering-data"><i class="fa fa-check"></i><b>4.3.1</b> Gathering Data</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#separating-columns"><i class="fa fa-check"></i><b>4.3.2</b> Separating Columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#spreading-data"><i class="fa fa-check"></i><b>4.3.3</b> Spreading Data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#joins"><i class="fa fa-check"></i><b>4.4</b> Joins</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#mutating-joins"><i class="fa fa-check"></i><b>4.4.1</b> Mutating Joins</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#filtering-joins"><i class="fa fa-check"></i><b>4.4.2</b> Filtering Joins</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#binding-joins"><i class="fa fa-check"></i><b>4.4.3</b> Binding Joins</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#checking-for-unique-and-duplicate-information"><i class="fa fa-check"></i><b>4.5</b> Checking for Unique and Duplicate Information</a></li>
<li class="chapter" data-level="4.6" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#exercises-3"><i class="fa fa-check"></i><b>4.6</b> Exercises</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#introduction-and-setup"><i class="fa fa-check"></i><b>4.6.1</b> Introduction and Setup</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#long-and-wide-data"><i class="fa fa-check"></i><b>4.6.2</b> Long and Wide Data</a></li>
<li class="chapter" data-level="4.6.3" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#uniting-and-separating-columns"><i class="fa fa-check"></i><b>4.6.3</b> Uniting and Separating Columns</a></li>
<li class="chapter" data-level="4.6.4" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#mutating-joins-1"><i class="fa fa-check"></i><b>4.6.4</b> Mutating Joins</a></li>
<li class="chapter" data-level="4.6.5" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#filtering-joins-1"><i class="fa fa-check"></i><b>4.6.5</b> Filtering Joins</a></li>
<li class="chapter" data-level="4.6.6" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#binding-joins-1"><i class="fa fa-check"></i><b>4.6.6</b> Binding Joins</a></li>
<li class="chapter" data-level="4.6.7" data-path="data-manipulation-1.html"><a href="data-manipulation-1.html#checking-for-duplicates"><i class="fa fa-check"></i><b>4.6.7</b> Checking for Duplicates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html"><i class="fa fa-check"></i><b>5</b> Data Manipulation 2</a><ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#getting-started-2"><i class="fa fa-check"></i><b>5.1</b> Getting Started</a></li>
<li class="chapter" data-level="5.2" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#understanding-our-data"><i class="fa fa-check"></i><b>5.2</b> Understanding our Data</a></li>
<li class="chapter" data-level="5.3" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#preparing-our-data"><i class="fa fa-check"></i><b>5.3</b> Preparing our Data</a></li>
<li class="chapter" data-level="5.4" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#selecting-columns"><i class="fa fa-check"></i><b>5.4</b> Selecting Columns</a><ul>
<li class="chapter" data-level="5.4.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#renaming-and-reordering-columns"><i class="fa fa-check"></i><b>5.4.1</b> Renaming and Reordering Columns</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#creating-and-changing-columns"><i class="fa fa-check"></i><b>5.5</b> Creating and Changing Columns</a></li>
<li class="chapter" data-level="5.6" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#filtering-to-observations"><i class="fa fa-check"></i><b>5.6</b> Filtering to Observations</a><ul>
<li class="chapter" data-level="5.6.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#filtering-with-logical-operations"><i class="fa fa-check"></i><b>5.6.1</b> Filtering with Logical Operations</a></li>
<li class="chapter" data-level="5.6.2" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#combining-filtering-criteria"><i class="fa fa-check"></i><b>5.6.2</b> Combining Filtering Criteria</a></li>
<li class="chapter" data-level="5.6.3" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#removing-by-ceriteria"><i class="fa fa-check"></i><b>5.6.3</b> Removing by Ceriteria</a></li>
<li class="chapter" data-level="5.6.4" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#handling-nas"><i class="fa fa-check"></i><b>5.6.4</b> Handling NAs</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#arranging-data"><i class="fa fa-check"></i><b>5.7</b> Arranging Data</a></li>
<li class="chapter" data-level="5.8" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#summarising-data"><i class="fa fa-check"></i><b>5.8</b> Summarising Data</a></li>
<li class="chapter" data-level="5.9" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#grouping-data"><i class="fa fa-check"></i><b>5.9</b> Grouping Data</a><ul>
<li class="chapter" data-level="5.9.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#ungrouping-data"><i class="fa fa-check"></i><b>5.9.1</b> Ungrouping Data</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#chaining-many-functions"><i class="fa fa-check"></i><b>5.10</b> Chaining Many Functions</a></li>
<li class="chapter" data-level="5.11" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#saving-data"><i class="fa fa-check"></i><b>5.11</b> Saving Data</a><ul>
<li class="chapter" data-level="5.11.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#csv-files"><i class="fa fa-check"></i><b>5.11.1</b> CSV Files</a></li>
<li class="chapter" data-level="5.11.2" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#r-data-files"><i class="fa fa-check"></i><b>5.11.2</b> R Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#exercises-4"><i class="fa fa-check"></i><b>5.12</b> Exercises</a><ul>
<li class="chapter" data-level="5.12.1" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-1-4"><i class="fa fa-check"></i><b>5.12.1</b> Question 1</a></li>
<li class="chapter" data-level="5.12.2" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-2-4"><i class="fa fa-check"></i><b>5.12.2</b> Question 2</a></li>
<li class="chapter" data-level="5.12.3" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-3-4"><i class="fa fa-check"></i><b>5.12.3</b> Question 3</a></li>
<li class="chapter" data-level="5.12.4" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-4-4"><i class="fa fa-check"></i><b>5.12.4</b> Question 4</a></li>
<li class="chapter" data-level="5.12.5" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-5-4"><i class="fa fa-check"></i><b>5.12.5</b> Question 5</a></li>
<li class="chapter" data-level="5.12.6" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-6-4"><i class="fa fa-check"></i><b>5.12.6</b> Question 6</a></li>
<li class="chapter" data-level="5.12.7" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-7-4"><i class="fa fa-check"></i><b>5.12.7</b> Question 7</a></li>
<li class="chapter" data-level="5.12.8" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-8-4"><i class="fa fa-check"></i><b>5.12.8</b> Question 8</a></li>
<li class="chapter" data-level="5.12.9" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-9-4"><i class="fa fa-check"></i><b>5.12.9</b> Question 9</a></li>
<li class="chapter" data-level="5.12.10" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-10-3"><i class="fa fa-check"></i><b>5.12.10</b> Question 10</a></li>
<li class="chapter" data-level="5.12.11" data-path="data-manipulation-2.html"><a href="data-manipulation-2.html#question-11-1"><i class="fa fa-check"></i><b>5.12.11</b> Question 11</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="traditional-tests.html"><a href="traditional-tests.html"><i class="fa fa-check"></i><b>6</b> Traditional Tests</a></li>
<li class="chapter" data-level="7" data-path="simulation-and-calculating-power.html"><a href="simulation-and-calculating-power.html"><i class="fa fa-check"></i><b>7</b> Simulation and Calculating Power</a></li>
<li class="chapter" data-level="8" data-path="mixed-effects-models-1.html"><a href="mixed-effects-models-1.html"><i class="fa fa-check"></i><b>8</b> Mixed Effects Models 1</a></li>
<li class="chapter" data-level="9" data-path="mixed-effects-models-2.html"><a href="mixed-effects-models-2.html"><i class="fa fa-check"></i><b>9</b> Mixed Effects Models 2</a></li>
<li class="chapter" data-level="10" data-path="creating-reproducible-documents.html"><a href="creating-reproducible-documents.html"><i class="fa fa-check"></i><b>10</b> Creating Reproducible Documents</a><ul>
<li class="chapter" data-level="10.1" data-path="creating-reproducible-documents.html"><a href="creating-reproducible-documents.html#the-final-lesson"><i class="fa fa-check"></i><b>10.1</b> The Final Lesson</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Psych</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation-2" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Data Manipulation 2</h1>
<p>In this section, we’ll look at getting our data in the correct format for reporting your analyses. We’ll cover topics such as renaming and reordering variables, creating new variables, and creating summaries of your data. To do this, we’ll use the <strong>dplyr</strong> package <span class="citation">(Wickham et al. <a href="#ref-R-dplyr">2017</a>)</span> from the tidyverse <span class="citation">(Wickham <a href="#ref-R-tidyverse">2017</a>)</span>.</p>
<p>We’ll cover the following functions that work with the <code>group_by</code> functioin:</p>
<ul>
<li><code>arrange()</code>: order variables (i.e. ordering in rows)</li>
<li><code>select()</code>: pick out variables (i.e. subsetting by columns, changing column order)</li>
<li><code>filter()</code>: pick out observations (i.e. subsetting by observations)</li>
<li><code>mutate()</code>: create new variables</li>
<li><code>summarise()</code>: create a summary of variables (e.g. mean, <em>SD</em>, n)</li>
</ul>
<p>The <code>group_by</code> function allows you to change the scope by which these functions work. For example, we can group our data by condition with <code>group_by(condition)</code> and then create summary statistics with <code>summarise()</code>.</p>
<p>Additionally, we’ll cover renaming variables with <code>rename()</code>.</p>
<p>You should notice some <a href="https://youtu.be/HMD2lCnWfns?t=45s">familiar patterns</a> with how we use and mix together these functions as we progress.</p>
<div id="getting-started-2" class="section level2">
<h2><span class="header-section-number">5.1</span> Getting Started</h2>
<p>As always, we first need to load the <code>tidyverse</code> set of packages for this Chapter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<p>Next, we’ll load the raw and (wide formatted) demographic data sets from the lexical decision experiment from the previous Chapter. To do so, we’ll use <code>read_csv()</code> here, for reasons explained in the previous Chapter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;inputs/lexical_decision_demographic_data_wide.csv&quot;</span>)</code></pre></div>
<p>You should get a warning when loading the data, telling you how each column is parsed. We can specify during the loading process how to parse each column, for example setting strings to factors. However, we’ll do this manually in <code>dplyr()</code> to give you more experience using this pacakge for mutating your data.</p>
</div>
<div id="understanding-our-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Understanding our Data</h2>
<p>Let’s look at the data we’ve just loaded to get an idea of how we want to change it. When we have many rows and we attempt to print a tibble, we won’t see all columns in the console. One way to get an idea of how all columns look is to transpose these columns and take a look at the first few observations. To do this, we can use <code>glimpse()</code> to get a glimpse of our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(demo)</code></pre></div>
<pre><code>## Observations: 29
## Variables: 14
## $ ID              &lt;chr&gt; &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;...
## $ `C++`           &lt;int&gt; 1, 1, NA, 1, NA, NA, NA, NA, NA, 1, 1, NA, NA,...
## $ FORTRAN         &lt;int&gt; 1, NA, 1, 1, NA, 1, NA, NA, 1, 1, NA, NA, 1, N...
## $ JavaScript      &lt;int&gt; 1, NA, NA, NA, NA, 1, NA, 1, NA, 1, NA, NA, NA...
## $ Python          &lt;int&gt; NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, 1, ...
## $ R               &lt;int&gt; NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1, ...
## $ Ruby            &lt;int&gt; NA, NA, NA, NA, 1, NA, 1, NA, NA, NA, NA, NA, ...
## $ LANGUAGE        &lt;chr&gt; &quot;OTHER&quot;, NA, &quot;ENGLISH&quot;, NA, &quot;english&quot;, &quot;ENGLIS...
## $ progress        &lt;chr&gt; &quot;FINISH&quot;, &quot;no&quot;, &quot;END&quot;, &quot;ethics&quot;, &quot;ethics&quot;, &quot;EN...
## $ gender          &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;f...
## $ age             &lt;int&gt; 30, 30, 30, 18, 31, 44, 23, 34, 32, 33, 20, 31...
## $ tester          &lt;chr&gt; &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;...
## $ funRec          &lt;chr&gt; &quot;7-no&quot;, &quot;6-yes&quot;, &quot;4-yes&quot;, &quot;0-no&quot;, &quot;4-no&quot;, &quot;5-n...
## $ completion_time &lt;chr&gt; &quot;2018-03-22 23:06:11_2018-03-23 00:25:51&quot;, &quot;20...</code></pre>
<p>As we can see, we have information on the subject’s ID, columns indicating any programming languages they might know, a column specifying their language spoken, how far they got in the experiment, some demographic information, who tested them, whether they liked the experiment and would recommend it to others, and the start and end times for their part in the experiment.</p>
<p>We can also see how this data was parsed, with numeric columns as integers, and all other columns as characters. However, some of this data would be best represented as a different format. We’ll look into changing this later in this Chapter.</p>
</div>
<div id="preparing-our-data" class="section level2">
<h2><span class="header-section-number">5.3</span> Preparing our Data</h2>
<p>Our data is quite messy as it stands. One of the biggest issues is that we have two variables contained within one column for both the <code>funRec</code> and <code>completion_time</code> columns. Let’s separate these two columns using the <code>separate()</code> function from <strong>tidyr</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo &lt;-<span class="st"> </span>demo %&gt;%
<span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> funRec, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;fun&quot;</span>, <span class="st">&quot;recommend&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> completion_time, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;end&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)
<span class="kw">glimpse</span>(demo)</code></pre></div>
<pre><code>## Observations: 29
## Variables: 16
## $ ID         &lt;chr&gt; &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30...
## $ `C++`      &lt;int&gt; 1, 1, NA, 1, NA, NA, NA, NA, NA, 1, 1, NA, NA, NA, ...
## $ FORTRAN    &lt;int&gt; 1, NA, 1, 1, NA, 1, NA, NA, 1, 1, NA, NA, 1, NA, 1,...
## $ JavaScript &lt;int&gt; 1, NA, NA, NA, NA, 1, NA, 1, NA, 1, NA, NA, NA, NA,...
## $ Python     &lt;int&gt; NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, 1, NA, N...
## $ R          &lt;int&gt; NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1, 1, NA...
## $ Ruby       &lt;int&gt; NA, NA, NA, NA, 1, NA, 1, NA, NA, NA, NA, NA, NA, 1...
## $ LANGUAGE   &lt;chr&gt; &quot;OTHER&quot;, NA, &quot;ENGLISH&quot;, NA, &quot;english&quot;, &quot;ENGLISH&quot;, N...
## $ progress   &lt;chr&gt; &quot;FINISH&quot;, &quot;no&quot;, &quot;END&quot;, &quot;ethics&quot;, &quot;ethics&quot;, &quot;END&quot;, &quot;...
## $ gender     &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female...
## $ age        &lt;int&gt; 30, 30, 30, 18, 31, 44, 23, 34, 32, 33, 20, 31, 33,...
## $ tester     &lt;chr&gt; &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW...
## $ fun        &lt;chr&gt; &quot;7&quot;, &quot;6&quot;, &quot;4&quot;, &quot;0&quot;, &quot;4&quot;, &quot;5&quot;, &quot;0&quot;, &quot;6&quot;, &quot;1&quot;, &quot;4&quot;, &quot;...
## $ recommend  &lt;chr&gt; &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;...
## $ start      &lt;chr&gt; &quot;2018-03-22 23:06:11&quot;, &quot;2018-03-26 00:30:20&quot;, &quot;2018...
## $ end        &lt;chr&gt; &quot;2018-03-23 00:25:51&quot;, &quot;2018-03-26 02:15:52&quot;, &quot;2018...</code></pre>
</div>
<div id="selecting-columns" class="section level2">
<h2><span class="header-section-number">5.4</span> Selecting Columns</h2>
<p>First off, we should probably drop any columns from the data that we don’t need to use. We’re not going to look at the programming languages they know, so we can drop all of these columns using <code>select()</code>. We’ll create a subset of our data that doesn’t contain these columns.</p>
<p>Here, we’ll ask to keep all of the columns we want to keep. We can do this by name or column number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># by name</span>
demo %&gt;%<span class="st"> </span><span class="kw">select</span>(ID, 
                LANGUAGE, 
                progress, 
                gender, 
                age, 
                tester, 
                fun,
                recommend,
                start,
                end
                )</code></pre></div>
<pre><code>## # A tibble: 29 x 10
##    ID    LANGUAGE progress gender   age tester fun   recommend start end  
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
##  1 22    OTHER    FINISH   female    30 GW     7     no        2018~ 2018~
##  2 23    &lt;NA&gt;     no       male      30 GW     6     yes       2018~ 2018~
##  3 24    ENGLISH  END      female    30 GW     4     yes       2018~ 2018~
##  4 25    &lt;NA&gt;     ethics   male      18 GW     0     no        2018~ 2018~
##  5 26    english  ethics   male      31 GW     4     no        2018~ 2018~
##  6 27    ENGLISH  END      female    44 GW     5     no        2018~ 2018~
##  7 28    &lt;NA&gt;     ethics   male      23 GW     0     no        2018~ 2018~
##  8 29    english  ethics   male      34 GW     6     no        2018~ 2018~
##  9 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes       2018~ 2018~
## 10 A2    English  END      female    33 RHB    4     yes       2018~ 2018~
## # ... with 19 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># by number</span>
demo %&gt;%<span class="st"> </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">8</span>:<span class="dv">16</span>))</code></pre></div>
<pre><code>## # A tibble: 29 x 10
##    ID    LANGUAGE progress gender   age tester fun   recommend start end  
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
##  1 22    OTHER    FINISH   female    30 GW     7     no        2018~ 2018~
##  2 23    &lt;NA&gt;     no       male      30 GW     6     yes       2018~ 2018~
##  3 24    ENGLISH  END      female    30 GW     4     yes       2018~ 2018~
##  4 25    &lt;NA&gt;     ethics   male      18 GW     0     no        2018~ 2018~
##  5 26    english  ethics   male      31 GW     4     no        2018~ 2018~
##  6 27    ENGLISH  END      female    44 GW     5     no        2018~ 2018~
##  7 28    &lt;NA&gt;     ethics   male      23 GW     0     no        2018~ 2018~
##  8 29    english  ethics   male      34 GW     6     no        2018~ 2018~
##  9 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes       2018~ 2018~
## 10 A2    English  END      female    33 RHB    4     yes       2018~ 2018~
## # ... with 19 more rows</code></pre>
<p>Alternatively, we could have just specified the columns we wanted to drop. To do so, we can tell R to select all columns, except (<code>-</code>) column numbers 2 through 7. Remember, we have to concatenate these values to apply tell R to remove all of these columns, and not just the first one.</p>
<p>This time, we’ll save our data as <code>demo_sub</code>, as we’ve made a subset of our original demographic data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub &lt;-<span class="st"> </span>demo %&gt;%<span class="st"> </span><span class="kw">select</span>(-<span class="kw">c</span>(<span class="dv">2</span>:<span class="dv">7</span>))
demo_sub</code></pre></div>
<pre><code>## # A tibble: 29 x 10
##    ID    LANGUAGE progress gender   age tester fun   recommend start end  
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
##  1 22    OTHER    FINISH   female    30 GW     7     no        2018~ 2018~
##  2 23    &lt;NA&gt;     no       male      30 GW     6     yes       2018~ 2018~
##  3 24    ENGLISH  END      female    30 GW     4     yes       2018~ 2018~
##  4 25    &lt;NA&gt;     ethics   male      18 GW     0     no        2018~ 2018~
##  5 26    english  ethics   male      31 GW     4     no        2018~ 2018~
##  6 27    ENGLISH  END      female    44 GW     5     no        2018~ 2018~
##  7 28    &lt;NA&gt;     ethics   male      23 GW     0     no        2018~ 2018~
##  8 29    english  ethics   male      34 GW     6     no        2018~ 2018~
##  9 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes       2018~ 2018~
## 10 A2    English  END      female    33 RHB    4     yes       2018~ 2018~
## # ... with 19 more rows</code></pre>
<p>There are a number of helper functions in <code>select()</code> which can help you to stop having to explicitly mention every column you want to keep. These are:</p>
<ul>
<li><code>starts_with(&quot;string&quot;)</code>: this keeps any columns with names starting with “string”</li>
<li><code>ends_with(&quot;string&quot;)</code>: this keeps any columns with names ending with “string”</li>
<li><code>contains(&quot;string&quot;)</code>: this keeps any columns with names containing “string” at any point</li>
<li><code>matches(regular_expression)</code>: this keeps any columns that match a regular expression</li>
<li><code>num_range(&quot;prefix&quot;, range)</code>: this keeps any columns with a matching prefix and a following range of numbers. For example, `num_range(“measurement”, 1:3) would keep all columns called “measurement1”, “measurement2”, and “measurement3”.</li>
</ul>
<p>For this simple case here, these aren’t necessary, but they’re good to know for working with larger data sets.</p>
<div id="renaming-and-reordering-columns" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Renaming and Reordering Columns</h3>
<p>We can use the <code>rename()</code> function to change our columns names. We have some messy names here, so we’ll look at how we can rename them now. This renaming function takes the order of our new names are equal to our old names. Let’s just overwrite our old subsetted data to change the names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub &lt;-<span class="st"> </span>demo_sub %&gt;%<span class="st"> </span><span class="kw">rename</span>(<span class="dt">language =</span> LANGUAGE)
demo_sub</code></pre></div>
<pre><code>## # A tibble: 29 x 10
##    ID    language progress gender   age tester fun   recommend start end  
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
##  1 22    OTHER    FINISH   female    30 GW     7     no        2018~ 2018~
##  2 23    &lt;NA&gt;     no       male      30 GW     6     yes       2018~ 2018~
##  3 24    ENGLISH  END      female    30 GW     4     yes       2018~ 2018~
##  4 25    &lt;NA&gt;     ethics   male      18 GW     0     no        2018~ 2018~
##  5 26    english  ethics   male      31 GW     4     no        2018~ 2018~
##  6 27    ENGLISH  END      female    44 GW     5     no        2018~ 2018~
##  7 28    &lt;NA&gt;     ethics   male      23 GW     0     no        2018~ 2018~
##  8 29    english  ethics   male      34 GW     6     no        2018~ 2018~
##  9 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes       2018~ 2018~
## 10 A2    English  END      female    33 RHB    4     yes       2018~ 2018~
## # ... with 19 more rows</code></pre>
<p>Finally, what if we want to put the age and gender columns next to the ID column? We can use <code>select()</code> to pick out our first two columns, then <code>everything()</code> to grab every remaining column and stick them on the end.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">select</span>(ID, age, gender, <span class="kw">everything</span>())</code></pre></div>
<pre><code>## # A tibble: 29 x 10
##    ID      age gender language progress tester fun   recommend start end  
##    &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
##  1 22       30 female OTHER    FINISH   GW     7     no        2018~ 2018~
##  2 23       30 male   &lt;NA&gt;     no       GW     6     yes       2018~ 2018~
##  3 24       30 female ENGLISH  END      GW     4     yes       2018~ 2018~
##  4 25       18 male   &lt;NA&gt;     ethics   GW     0     no        2018~ 2018~
##  5 26       31 male   english  ethics   GW     4     no        2018~ 2018~
##  6 27       44 female ENGLISH  END      GW     5     no        2018~ 2018~
##  7 28       23 male   &lt;NA&gt;     ethics   GW     0     no        2018~ 2018~
##  8 29       34 male   english  ethics   GW     6     no        2018~ 2018~
##  9 30       32 female &lt;NA&gt;     &lt;NA&gt;     GW     1     yes       2018~ 2018~
## 10 A2       33 female English  END      RHB    4     yes       2018~ 2018~
## # ... with 19 more rows</code></pre>
</div>
</div>
<div id="creating-and-changing-columns" class="section level2">
<h2><span class="header-section-number">5.5</span> Creating and Changing Columns</h2>
<p>If we want to create a new column in our data, or it we want to change how a column is represented, we have to mutate our data using<code>mutate()</code>.</p>
<p>What if we want to make a new column that tells us how long people spent on the experiment? We can create a new column by subtracting the start time of each participant from their end time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this will not run</span>

<span class="co"># demo_sub &lt;- demo_sub %&gt;%</span>
<span class="co">#  mutate(time = end - start)</span></code></pre></div>
<p>Oops, that didn’t work. Why not? It looks like the start and end columns are stored as characters. We can’t perform a subtraction on a character, so we need to tell R that these are numbers. Specifically, we need to tell R that these are datetimes.</p>
<p>One package that makes this very easy is the <strong>lubridate</strong> package <span class="citation">(Grolemund and Wickham <a href="#ref-R-lubridate">2011</a>)</span>, which is designed to make working with datetimes very easy. Let’s install this before we convert our start and end columns to datetimes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(lubridate) # uncomment and run this only once</span>
<span class="kw">library</span>(lubridate)</code></pre></div>
<p>The <strong>lubridate</strong> package has a number of useful functions that allow us to covert our data types to datetimes, as well as ways to run calculations on these times.</p>
<p>One function we’ll use here is the <code>ymd_hms()</code> function, which converts data to the POSIXct format. The upshoot of this is that we can now subract one time from the other to get a duration.</p>
<p>Below, we’ll mutate the start and end columns to be themselves, only converted to the proper datetime format. We’ll also create a new column, time, made up of subtracting the start times from the end times to get a duration.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub &lt;-<span class="st"> </span>demo_sub %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">start =</span> <span class="kw">ymd_hms</span>(start),
         <span class="dt">end =</span> <span class="kw">ymd_hms</span>(end),
         <span class="dt">time =</span> end -<span class="st"> </span>start
         )
<span class="kw">glimpse</span>(demo_sub)</code></pre></div>
<pre><code>## Observations: 29
## Variables: 11
## $ ID        &lt;chr&gt; &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;...
## $ language  &lt;chr&gt; &quot;OTHER&quot;, NA, &quot;ENGLISH&quot;, NA, &quot;english&quot;, &quot;ENGLISH&quot;, NA...
## $ progress  &lt;chr&gt; &quot;FINISH&quot;, &quot;no&quot;, &quot;END&quot;, &quot;ethics&quot;, &quot;ethics&quot;, &quot;END&quot;, &quot;e...
## $ gender    &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;...
## $ age       &lt;int&gt; 30, 30, 30, 18, 31, 44, 23, 34, 32, 33, 20, 31, 33, ...
## $ tester    &lt;chr&gt; &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;...
## $ fun       &lt;chr&gt; &quot;7&quot;, &quot;6&quot;, &quot;4&quot;, &quot;0&quot;, &quot;4&quot;, &quot;5&quot;, &quot;0&quot;, &quot;6&quot;, &quot;1&quot;, &quot;4&quot;, &quot;3...
## $ recommend &lt;chr&gt; &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;y...
## $ start     &lt;dttm&gt; 2018-03-22 23:06:11, 2018-03-26 00:30:20, 2018-03-2...
## $ end       &lt;dttm&gt; 2018-03-23 00:25:51, 2018-03-26 02:15:52, 2018-03-2...
## $ time      &lt;time&gt; 1.327778 hours, 1.758889 hours, 1.113889 hours, 1.6...</code></pre>
<p>Did you notice that we can refer to columns we’ve asked to create within <code>mutate()</code> to create other columns? Pretty cool!</p>
<p>We can perform any number of operations on our columns in <code>mutate()</code>. But what if we want to do this and only keep the new columns? We can use <code>transmute()</code>.</p>
<p>Below, we’ll ask to keep the subject ID column, but to create our new start and end columns with mutate. Since the difference from the mean will (typically) be quite small, we can convert from hours to minutes by setting the units within our time variable to minutes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate difference from mean completion time</span>
transmuted_time &lt;-<span class="st"> </span>demo_sub %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">start =</span> <span class="kw">ymd_hms</span>(start),
    <span class="dt">end =</span> <span class="kw">ymd_hms</span>(end),
    <span class="dt">time =</span> end -<span class="st"> </span>start
  ) %&gt;%
<span class="st">  </span><span class="kw">transmute</span>(
    ID,
    <span class="dt">time_diff =</span> time -<span class="st"> </span><span class="kw">mean</span>(time)
  )

<span class="co"># define the units of time, this can be mins, hours, days, etc.</span>
<span class="kw">units</span>(transmuted_time$time_diff) &lt;-<span class="st"> &quot;mins&quot;</span>

<span class="co"># print the object</span>
transmuted_time</code></pre></div>
<pre><code>## # A tibble: 29 x 2
##    ID    time_diff        
##    &lt;chr&gt; &lt;time&gt;           
##  1 22    -7.18563218390805
##  2 23    18.6810344827586 
##  3 24    -20.0189655172414
##  4 25    14.5977011494253 
##  5 26    4.13103448275861 
##  6 27    -22.785632183908 
##  7 28    17.4810344827586 
##  8 29    8.14770114942528 
##  9 30    -13.9022988505747
## 10 A2    -5.86896551724138
## # ... with 19 more rows</code></pre>
<p>Note that we can change a column to many different data types by simply setting the column name to itself and the data type you want. For example, <code>mutate(start = as.numeric(start))</code>. We can also mutate multiple columns at once using <code>mutate_all()</code> or <code>mutate_at()</code>, but we won’t cover this here. Check out the variants on the <strong>dplyr</strong> verbs to see how you can improve your code!</p>
<p>So far, we’ve learned how to create new columns, including keeping these with the original data set (<code>mutate()</code>) or keeping only the new columns (<code>transmute()</code>). We’ve also seen how we can subset our data to the most relevant columns using <code>select()</code>. Next, we’ll look at how we can subset our data by selecting certain observations (i.e. rows) within our data. For this, we’ll use the <code>filter()</code> function.</p>
</div>
<div id="filtering-to-observations" class="section level2">
<h2><span class="header-section-number">5.6</span> Filtering to Observations</h2>
<p>The <code>filter()</code> function allows us to filter our data to certain observations. We can use a number of logical operations to filter by certain conditions. As with the other <strong>dplyr</strong> functions, <code>filter()</code> must take the data as an argument, but afterwards it needs to take a rule by which to subset your data. Here, you just specify the conditons by which to keep observations. Nicely, the <code>filter()</code> argument can be piped, and used in conjunction with other <strong>dplyr</strong> functions.</p>
<p>Take a look at the <code>demo_sub</code> data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(demo_sub)</code></pre></div>
<pre><code>## Observations: 29
## Variables: 11
## $ ID        &lt;chr&gt; &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;, &quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;...
## $ language  &lt;chr&gt; &quot;OTHER&quot;, NA, &quot;ENGLISH&quot;, NA, &quot;english&quot;, &quot;ENGLISH&quot;, NA...
## $ progress  &lt;chr&gt; &quot;FINISH&quot;, &quot;no&quot;, &quot;END&quot;, &quot;ethics&quot;, &quot;ethics&quot;, &quot;END&quot;, &quot;e...
## $ gender    &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;...
## $ age       &lt;int&gt; 30, 30, 30, 18, 31, 44, 23, 34, 32, 33, 20, 31, 33, ...
## $ tester    &lt;chr&gt; &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;, &quot;GW&quot;...
## $ fun       &lt;chr&gt; &quot;7&quot;, &quot;6&quot;, &quot;4&quot;, &quot;0&quot;, &quot;4&quot;, &quot;5&quot;, &quot;0&quot;, &quot;6&quot;, &quot;1&quot;, &quot;4&quot;, &quot;3...
## $ recommend &lt;chr&gt; &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;y...
## $ start     &lt;dttm&gt; 2018-03-22 23:06:11, 2018-03-26 00:30:20, 2018-03-2...
## $ end       &lt;dttm&gt; 2018-03-23 00:25:51, 2018-03-26 02:15:52, 2018-03-2...
## $ time      &lt;time&gt; 1.327778 hours, 1.758889 hours, 1.113889 hours, 1.6...</code></pre>
<p>You can see that we have a number of columns, but crucially, we have one where we kept track of the subject’s progress in our experiment. How many labels do we have for this? We can check for the unique labels in oru data using the <code>unique()</code> function. Alternatively, if our data is a factor, then it should have defined levels, so we could use the <code>levels()</code> function. To save time recoding our data types, we’ll just use the <code>unique()</code> function for now.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(demo_sub$progress)</code></pre></div>
<pre><code>## [1] &quot;FINISH&quot; &quot;no&quot;     &quot;END&quot;    &quot;ethics&quot; NA</code></pre>
<p>We have a few labels: FINISH, no, END, ethics, and NA. It looks like we have a slightly messy data set, as both FINISH and END indicate the same point of progress; these subjects completed the experiment. If we just want to subset our data to those who finished the experiment, we could use these labels to filter out observations.</p>
<div id="filtering-with-logical-operations" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Filtering with Logical Operations</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(progress ==<span class="st"> &quot;FINISH&quot;</span> |<span class="st"> </span>progress ==<span class="st"> &quot;END&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 23 x 11
##    ID    language progress gender       age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 22    OTHER    FINISH   female        30 GW     7     no       
##  2 24    ENGLISH  END      female        30 GW     4     yes      
##  3 27    ENGLISH  END      female        44 GW     5     no       
##  4 A2    English  END      female        33 RHB    4     yes      
##  5 A3    Other    END      male          20 RHB    3     no       
##  6 C     English  END      female        31 RHB    1     yes      
##  7 D     Other    END      non-binary    33 RHB    5     yes      
##  8 I     Other    END      male          36 RHB    5     no       
##  9 J     Other    END      female        28 RHB    6     yes      
## 10 K     English  END      male          33 RHB    1     yes      
## # ... with 13 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p>Read the above command like, “filter to observations where the progress is equal to FINISH <strong>or</strong> the progress is equal to END”. Remember, to check if something is equal to another thing, we have to use double equals (<code>==</code>) rather than a single equal (<code>=</code>) as a single equal is an assignment operator. Finally, the pipe between these two statements is an OR operator, so we keep any observations that are equal to FINISH <strong>or</strong> equal to END.</p>
<p>This type of filtering can get confusing if we have more than 2 conditions that we would like to check. One way around this is to use the %in% operator, which evaluates to TRUE if an observation is <strong>in</strong> a sequence that you provide. The best way to see how this works is to try it out yourself:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(progress %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FINISH&quot;</span>, <span class="st">&quot;END&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 23 x 11
##    ID    language progress gender       age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 22    OTHER    FINISH   female        30 GW     7     no       
##  2 24    ENGLISH  END      female        30 GW     4     yes      
##  3 27    ENGLISH  END      female        44 GW     5     no       
##  4 A2    English  END      female        33 RHB    4     yes      
##  5 A3    Other    END      male          20 RHB    3     no       
##  6 C     English  END      female        31 RHB    1     yes      
##  7 D     Other    END      non-binary    33 RHB    5     yes      
##  8 I     Other    END      male          36 RHB    5     no       
##  9 J     Other    END      female        28 RHB    6     yes      
## 10 K     English  END      male          33 RHB    1     yes      
## # ... with 13 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p>You can see that we get the same result here, but we can easily add more and more values inside the parentheses to be evaluated.</p>
<p>We can combine multiple filtering arguments by different columns, too. What if we wanted to get only those who completed the experiment, were tested by “RHB”, and are over the age of 30?</p>
</div>
<div id="combining-filtering-criteria" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Combining Filtering Criteria</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(progress %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FINISH&quot;</span>, <span class="st">&quot;END&quot;</span>),
                    tester ==<span class="st"> &quot;RHB&quot;</span>,
                    age &gt;<span class="st"> </span><span class="dv">30</span>
                    )</code></pre></div>
<pre><code>## # A tibble: 9 x 11
##   ID    language progress gender       age tester fun   recommend
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 A2    English  END      female        33 RHB    4     yes      
## 2 C     English  END      female        31 RHB    1     yes      
## 3 D     Other    END      non-binary    33 RHB    5     yes      
## 4 I     Other    END      male          36 RHB    5     no       
## 5 K     English  END      male          33 RHB    1     yes      
## 6 R1    English  END      female        31 RHB    6     yes      
## 7 R3    English  END      female        35 RHB    0     no       
## 8 V     Other    END      male          37 RHB    7     no       
## 9 W1    English  END      non-binary    31 RHB    1     no       
## # ... with 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;, time &lt;time&gt;</code></pre>
</div>
<div id="removing-by-ceriteria" class="section level3">
<h3><span class="header-section-number">5.6.3</span> Removing by Ceriteria</h3>
<p>Similarly to keeping those that match some crtieria, we can remove those who meet some criteria. Let’s say we just want to look at those who haven’t finished the experiment. We can do this by using the <code>!</code> (read: not) operator. Here, we ask to <strong>not</strong> keep those who have their progress as FINISH or END.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(!progress %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FINISH&quot;</span>, <span class="st">&quot;END&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 6 x 11
##   ID    language progress gender   age tester fun   recommend
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 23    &lt;NA&gt;     no       male      30 GW     6     yes      
## 2 25    &lt;NA&gt;     ethics   male      18 GW     0     no       
## 3 26    english  ethics   male      31 GW     4     no       
## 4 28    &lt;NA&gt;     ethics   male      23 GW     0     no       
## 5 29    english  ethics   male      34 GW     6     no       
## 6 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes      
## # ... with 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;, time &lt;time&gt;</code></pre>
</div>
<div id="handling-nas" class="section level3">
<h3><span class="header-section-number">5.6.4</span> Handling NAs</h3>
<p>We always need to be wary of NAs in R. If we ask R whether something is equal to an NA (an unknown value) it is very literal in that it tells us it can’t know. That’s because R has no information about what the NA is! Try filtering our data to only those with NAs for the language known.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this will not run</span>
demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(language ==<span class="st"> </span><span class="ot">NA</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 11
## # ... with 11 variables: ID &lt;chr&gt;, language &lt;chr&gt;, progress &lt;chr&gt;,
## #   gender &lt;chr&gt;, age &lt;int&gt;, tester &lt;chr&gt;, fun &lt;chr&gt;, recommend &lt;chr&gt;,
## #   start &lt;dttm&gt;, end &lt;dttm&gt;, time &lt;time&gt;</code></pre>
<p>Instead, we have to surround our variable with the <code>is.na()</code> function, to check whether these values are NAs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(language))</code></pre></div>
<pre><code>## # A tibble: 4 x 11
##   ID    language progress gender   age tester fun   recommend
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 23    &lt;NA&gt;     no       male      30 GW     6     yes      
## 2 25    &lt;NA&gt;     ethics   male      18 GW     0     no       
## 3 28    &lt;NA&gt;     ethics   male      23 GW     0     no       
## 4 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes      
## # ... with 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;, time &lt;time&gt;</code></pre>
<p>Also note that by default <code>filter()</code> excludes cases that don’t meet your criteria, or are NAs, so if you want to keep NAs you have to ask for them explicitly. Let’s look at filtering to only those who finished the experiment (FINISH or END) and those who we’re unsure about (NA).</p>
<p>Here, we look for observations for progress that are equal to FINISH <strong>or</strong> equal to END <strong>or</strong> which are NAs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(progress ==<span class="st"> &quot;FINISH&quot;</span> |<span class="st"> </span>progress ==<span class="st"> &quot;END&quot;</span> |<span class="st"> </span><span class="kw">is.na</span>(progress))</code></pre></div>
<pre><code>## # A tibble: 24 x 11
##    ID    language progress gender       age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 22    OTHER    FINISH   female        30 GW     7     no       
##  2 24    ENGLISH  END      female        30 GW     4     yes      
##  3 27    ENGLISH  END      female        44 GW     5     no       
##  4 30    &lt;NA&gt;     &lt;NA&gt;     female        32 GW     1     yes      
##  5 A2    English  END      female        33 RHB    4     yes      
##  6 A3    Other    END      male          20 RHB    3     no       
##  7 C     English  END      female        31 RHB    1     yes      
##  8 D     Other    END      non-binary    33 RHB    5     yes      
##  9 I     Other    END      male          36 RHB    5     no       
## 10 J     Other    END      female        28 RHB    6     yes      
## # ... with 14 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p>Alternatively, we can filter our data to anything that is not an NA (or that does not meet any range of crieria). To do this, we use the <code>!</code> logical operator (read this as “not”).</p>
<p>Similarly, we can combine turn this around and ask to not keep those that match the criteria above. Here, we have to ask to throw away those with progress that isn’t FINISH and isn’t END, <strong>and</strong> we want to throw out those with an NA for their progress.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">filter</span>(!progress %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FINISH&quot;</span>, <span class="st">&quot;END&quot;</span>) &amp;<span class="st"> </span>!<span class="kw">is.na</span>(progress))</code></pre></div>
<pre><code>## # A tibble: 5 x 11
##   ID    language progress gender   age tester fun   recommend
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 23    &lt;NA&gt;     no       male      30 GW     6     yes      
## 2 25    &lt;NA&gt;     ethics   male      18 GW     0     no       
## 3 26    english  ethics   male      31 GW     4     no       
## 4 28    &lt;NA&gt;     ethics   male      23 GW     0     no       
## 5 29    english  ethics   male      34 GW     6     no       
## # ... with 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;, time &lt;time&gt;</code></pre>
</div>
</div>
<div id="arranging-data" class="section level2">
<h2><span class="header-section-number">5.7</span> Arranging Data</h2>
<p>Often, with psychological data, we want to order our columns by the subject number, then their observations. This makes it easy to think about how individuals progressed through the experiment.</p>
<p>We can arrange our data using <code>arrange()</code> from <strong>dplyr</strong>. Again, this function takes the data, and then sorts by any columns that you give it. This function defaults to having lowest mnumbers first. So, if we sorted by subject ID and trial ID, you would get the lowest value for subjects first, and their lowest number for trials first.</p>
<p>We have a simple case here, where we only have one observation for each participant. Here, numbers come before letters, but those with numbered IDs were tested at the end of the experiment. How, then, should we order the data?</p>
<p>One option is to order the data such that IDs appear in descending order (using the <code>desc()</code> function).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(ID))</code></pre></div>
<pre><code>## # A tibble: 29 x 11
##    ID    language progress gender       age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 Z     Other    END      female        28 RHB    0     no       
##  2 W2    English  END      female        29 RHB    1     yes      
##  3 W1    English  END      non-binary    31 RHB    1     no       
##  4 V     Other    END      male          37 RHB    7     no       
##  5 T2    Other    END      male          27 RHB    0     yes      
##  6 T1    English  END      male          22 RHB    4     no       
##  7 S     English  END      female        25 RHB    4     no       
##  8 R3    English  END      female        35 RHB    0     no       
##  9 R2    English  END      non-binary    27 RHB    5     no       
## 10 R1    English  END      female        31 RHB    6     yes      
## # ... with 19 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p>Alternatively, we know that the tester GW ran the experiment last, so we could sort by tester. But let’s say that we want to sort by who tested them first, and then by who started the experiment first. To do this, we simply need to provide the start and tester columns to the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">arrange</span>(tester, start)</code></pre></div>
<pre><code>## # A tibble: 29 x 11
##    ID    language progress gender   age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 27    ENGLISH  END      female    44 GW     5     no       
##  2 24    ENGLISH  END      female    30 GW     4     yes      
##  3 30    &lt;NA&gt;     &lt;NA&gt;     female    32 GW     1     yes      
##  4 22    OTHER    FINISH   female    30 GW     7     no       
##  5 26    english  ethics   male      31 GW     4     no       
##  6 29    english  ethics   male      34 GW     6     no       
##  7 25    &lt;NA&gt;     ethics   male      18 GW     0     no       
##  8 28    &lt;NA&gt;     ethics   male      23 GW     0     no       
##  9 23    &lt;NA&gt;     no       male      30 GW     6     yes      
## 10 S     English  END      female    25 RHB    4     no       
## # ... with 19 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p>Again, we can flip the order for tester by using the <code>desc()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(tester), start)</code></pre></div>
<pre><code>## # A tibble: 29 x 11
##    ID    language progress gender   age tester fun   recommend
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 S     English  END      female    25 RHB    4     no       
##  2 J     Other    END      female    28 RHB    6     yes      
##  3 M2    Other    END      female    27 RHB    4     no       
##  4 W2    English  END      female    29 RHB    1     yes      
##  5 Z     Other    END      female    28 RHB    0     no       
##  6 R1    English  END      female    31 RHB    6     yes      
##  7 R3    English  END      female    35 RHB    0     no       
##  8 C     English  END      female    31 RHB    1     yes      
##  9 A2    English  END      female    33 RHB    4     yes      
## 10 V     Other    END      male      37 RHB    7     no       
## # ... with 19 more rows, and 3 more variables: start &lt;dttm&gt;, end &lt;dttm&gt;,
## #   time &lt;time&gt;</code></pre>
<p><em>Note</em>: If we have missing values, these always come at the end of the table.</p>
</div>
<div id="summarising-data" class="section level2">
<h2><span class="header-section-number">5.8</span> Summarising Data</h2>
<p>Finally, we get onto the most important section for psychologists; how to report summaries of your data.</p>
<p><code>summarise()</code> collapses across all observations in your data set to produce a single row of data. Within the <code>summarise()</code> function, we have to specify what we would like to create. To do this, we just use the same functions we would use to create a new column in our original data set.</p>
<p>Let’s say we want to calculate the average time spent on the experiment. We just need to specify what our column will be called (mean_time here), and how we should create this column. Here, we’ve created it by calculating the <code>mean()</code> over the time column in our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time))</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   mean_time       
##   &lt;time&gt;          
## 1 1.44753831417625</code></pre>
<p>Now we know that the average completion time was 1.45 minutes. However, this doesn’t tell us much. We might also want to know the standard deviation for the mean times, as well as the count (i.e. how many people completed the experiment). To do this, we just need to list more arguments.</p>
<p>To add these summaries, we use the inbuilt <code>sd()</code> function, as well as the inbuilt <code>n()</code> function. We don’t pass anything to the <code>n()</code> function because it simply counts the number of observations over which we’ve summarised our data.</p>
<p>You don’t need to understand the mutating part of this chain, but just know that it replaces the first cell in time with an NA.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   mean_time        sd_time               N
##   &lt;time&gt;           &lt;time&gt;            &lt;int&gt;
## 1 1.44753831417625 0.275443582881955    29</code></pre>
<p>Finally, we have to be wary of NAs when calculating our statistics with <code>summarise()</code>. Here, I’ll introduce a missing value to our data before we calculate our summary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">time =</span> <span class="kw">replace</span>(time, <span class="dv">1</span>, <span class="ot">NA</span>)) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   mean_time sd_time     N
##   &lt;time&gt;    &lt;time&gt;  &lt;int&gt;
## 1 &lt;NA&gt;      NaN        29</code></pre>
<p><strong>dplyr</strong> is strict, in that it will give you all NAs for the summary of a value if that value contains NAs. This is good as you’ll be aware if you have missing data before you report anything. To suppress this behaviour, we simply have to ask R to remove NAs when calculating the mean and standard deviation.</p>
<p>To remove NAs, we need to explicitly set <code>na.rm = TRUE</code> in the functions we use. Read this as “Should I remove NAs? Yes!”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">time =</span> <span class="kw">replace</span>(time, <span class="dv">1</span>, <span class="ot">NA</span>)) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   mean_time        sd_time               N
##   &lt;time&gt;           &lt;time&gt;            &lt;int&gt;
## 1 1.45181547619048 0.279515577285935    29</code></pre>
</div>
<div id="grouping-data" class="section level2">
<h2><span class="header-section-number">5.9</span> Grouping Data</h2>
<p>One of the most convenient functions in <strong>dplyr</strong> is the <code>group_by</code> function. This plays well with a number of the functions we’ve looked at above, but it’s most useful when calculating summaries.</p>
<p>In this experiment, we cared about reaction times for those who are native and non-native English speakers. But did their completion times differ at all? To save on splitting our data and calculating summaries on the subsets of data, we can instead group our data by the language spoken, and pass these both to the <code>summary()</code> function. We do this using <code>group_by()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(language) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   language mean_time        sd_time                N
##   &lt;chr&gt;    &lt;time&gt;           &lt;time&gt;             &lt;int&gt;
## 1 english  1.54986111111111 0.0473368706294328     2
## 2 English  1.41704545454545 0.26597344132959      11
## 3 ENGLISH  1.09083333333333 0.0326054793547131     2
## 4 Other    1.48638888888889 0.317281110753131      9
## 5 OTHER    1.32777777777778 NaN                    1
## 6 &lt;NA&gt;     1.60111111111111 0.258434767023681      4</code></pre>
<p>As you can see, we got a summary by all of the groups in our language column. Unfortunately for us here, R doesn’t identify groups with the same name but different capitalisation as the same group. To fix this, we can chain the functions we’ve used above before calculating our descriptive statistics.</p>
<p>I’ll fix the names by setting the language column values to the language column values, only with all of the text in lowercase (using <code>tolower()</code> from baseR). This effectively overwrites the old values with our new, improved naming scheme.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">language =</span> <span class="kw">tolower</span>(language)) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(language) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   language mean_time        sd_time               N
##   &lt;chr&gt;    &lt;time&gt;           &lt;time&gt;            &lt;int&gt;
## 1 english  1.39125925925926 0.260337334300721    15
## 2 other    1.47052777777778 0.303311384194351    10
## 3 &lt;NA&gt;     1.60111111111111 0.258434767023681     4</code></pre>
<p>At a glance, there doesn’t seem to be much of a difference in the completion time for the English and Other groups. However, for the NA group, subjects seem to take a little longer than the other two groups. That’s perhaps something we would look into if we wanted to analyse their data.</p>
<p>Finally, we can use <code>group_by()</code> along with other functions, such as filtering our data to the two participants with the lowest times from the language groups. Let’s do that now.</p>
<p>To do this, we use another function from baseR called <code>rank()</code>. This rank orders all scores from the smallest to the largest value. Thus, if we group by language and filter to times with a rank of 1, we will filter to the lowest time in our language groups.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">language =</span> <span class="kw">tolower</span>(language)) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(language) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">rank</span>(time) ==<span class="st"> </span><span class="dv">1</span>) %&gt;%
<span class="st">  </span><span class="kw">glimpse</span>()</code></pre></div>
<pre><code>## Observations: 3
## Variables: 11
## $ ID        &lt;chr&gt; &quot;27&quot;, &quot;30&quot;, &quot;J&quot;
## $ language  &lt;chr&gt; &quot;english&quot;, NA, &quot;other&quot;
## $ progress  &lt;chr&gt; &quot;END&quot;, NA, &quot;END&quot;
## $ gender    &lt;chr&gt; &quot;female&quot;, &quot;female&quot;, &quot;female&quot;
## $ age       &lt;int&gt; 44, 32, 28
## $ tester    &lt;chr&gt; &quot;GW&quot;, &quot;GW&quot;, &quot;RHB&quot;
## $ fun       &lt;chr&gt; &quot;5&quot;, &quot;1&quot;, &quot;6&quot;
## $ recommend &lt;chr&gt; &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;
## $ start     &lt;dttm&gt; 2018-03-21 03:23:57, 2018-03-22 04:16:08, 2018-03-2...
## $ end       &lt;dttm&gt; 2018-03-21 04:28:01, 2018-03-22 05:29:05, 2018-03-2...
## $ time      &lt;time&gt; 1.067778 hours, 1.215833 hours, 1.073056 hours</code></pre>
<p>You can see that we have times of around 1 hour for each group, which is below the means we calculated before.</p>
<div id="ungrouping-data" class="section level3">
<h3><span class="header-section-number">5.9.1</span> Ungrouping Data</h3>
<p>Finally, if you want to perform further operations on a set of data after you’ve initially grouped it, you can ungroup the data using <code>ungroup()</code> prior to running further calculations.</p>
<p>Below, we remove the quickest people in each group before calculating the grand mean.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_sub %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">language =</span> <span class="kw">tolower</span>(language)) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(language) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">rank</span>(time) !=<span class="st"> </span><span class="dv">1</span>) %&gt;%
<span class="st">  </span><span class="kw">ungroup</span>() %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">sd_time =</span> <span class="kw">sd</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">N =</span> <span class="kw">n</span>()
            )</code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   mean_time       sd_time               N
##   &lt;time&gt;          &lt;time&gt;            &lt;int&gt;
## 1 1.4854594017094 0.264484846847179    26</code></pre>
</div>
</div>
<div id="chaining-many-functions" class="section level2">
<h2><span class="header-section-number">5.10</span> Chaining Many Functions</h2>
<p>As you saw before, our data wasn’t exactly tidy when we first loaded it. We can avoid a lot of intermediate steps, and make some of the processes we’ve went through above if we just chain our functions together. Here, we’ll tidy up our data before calculating some descriptive statistics.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load package</span>
<span class="kw">library</span>(lubridate)

<span class="co"># load, clean, and transform data</span>
demo_clean &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;inputs/lexical_decision_demographic_data_wide.csv&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> funRec, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;fun&quot;</span>, <span class="st">&quot;recommend&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> completion_time, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;end&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">8</span>:<span class="dv">16</span>)) %&gt;%
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">language =</span> LANGUAGE) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">start =</span> <span class="kw">ymd_hms</span>(start),
         <span class="dt">end =</span> <span class="kw">ymd_hms</span>(end),
         <span class="dt">time =</span> end -<span class="st"> </span>start,
         <span class="dt">language =</span> <span class="kw">tolower</span>(language)
         )</code></pre></div>
<p>In one step, we’ve used several of the commands that we used above to clean our data and to get it in the correct format for what we want to do with it. We can then pass this cleaned data to our <code>group_by()</code> and <code>summarise()</code> functions to generate summaries as before.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_clean %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(language) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_time =</span> <span class="kw">mean</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">sd_time =</span> <span class="kw">sd</span>(time, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
           <span class="dt">N =</span> <span class="kw">n</span>()
           )</code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   language mean_time        sd_time               N
##   &lt;chr&gt;    &lt;time&gt;           &lt;time&gt;            &lt;int&gt;
## 1 english  1.39125925925926 0.260337334300721    15
## 2 other    1.47052777777778 0.303311384194351    10
## 3 &lt;NA&gt;     1.60111111111111 0.258434767023681     4</code></pre>
<p>Or we can even plot the data using the pipe (<code>%&gt;%</code>) with <strong>ggplot2</strong>. Notice that the ggplot elements end the line in a <code>+</code> not a <code>%&gt;%</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_clean %&gt;%
<span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> language, <span class="dt">y =</span> time)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type difftime. Defaulting to continuous.</code></pre>
<p><img src="R_for_Psych_files/figure-html/5_clean_plot-1.png" width="672" /></p>
<p>There are some helper functions we haven’t covered here that might help you out with <strong>dplyr</strong>, but you should have most of what you need now to do the majority of your data processing tasks.</p>
</div>
<div id="saving-data" class="section level2">
<h2><span class="header-section-number">5.11</span> Saving Data</h2>
<p>Finally, we should look at saving our data. There are a few ways we can do this.</p>
<div id="csv-files" class="section level3">
<h3><span class="header-section-number">5.11.1</span> CSV Files</h3>
<p>One way is to save your data as a .csv file, in a similar format to the data you loaded into R. However, this way we lose any customised data types (such as start and end times being POSIXct) if we are to load the data back up into R. Still, it’s always good to have a copy of your data that is platform agnostic, so we should save it as a .csv so other people can load it up with any program they like. This format is also good for exploring your data in excel.</p>
<p>We’ll save our data in the outputs folder as a csv, using the <code>write_csv()</code> function from <strong>readr</strong> <span class="citation">(Wickham, Hester, and Francois <a href="#ref-R-readr">2017</a>)</span>, a part of the <strong>tidyverse</strong> <span class="citation">(Wickham <a href="#ref-R-tidyverse">2017</a>)</span>.</p>
<p>To save the data, we just need to specify the object to save (the table of your data) in the <code>write_csv()</code> function, along with the path to save the data. Here, we’ve specified that we want to save the data in the ouputs folder, and then given it a name. Folders are separated by a forwardslash, with the last string of text representing the file name. File names must end with .csv to specify the file type.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write_csv</span>(demo_clean, <span class="st">&quot;outputs/filtered_demographic_data.csv&quot;</span>)</code></pre></div>
<p>We could also save the data as an excel file, but it’s generally best to keep platform agnostic for your data backups. If you want to save your data in a useful format for further manipulation, save it as an RData file! That way, you can keep using R to work with your objects.</p>
</div>
<div id="r-data-files" class="section level3">
<h3><span class="header-section-number">5.11.2</span> R Data Files</h3>
<p>You don’t want to re-run all of your pre-analysis code every time you want to make a graph/model data, so saving your data after cleaning it up is generally a good idea. However, some of the R-specific information can get lost when saving as a .csv or other format (e.g. dates will be re-loaded as characters unless otherwise specified). Instead, we can save as an RData file which retains this information. Additionally, RData files generally take up less space on your hard drive than a .csv. Finally, we can save object types which don’t play well with .csv and other formats in an RData file, such as model outputs and nested data sets (which is pretty advanced; think of a table of data within each cell of a larger table).</p>
<p>Here, we will save our data as an .RData file, which we can then load up again in R for further processing. To do so, we need to specify the object(s) to save (we can save several in one data file!), and we need to specify the file as above. Here, we need to be specific by using the <code>file</code> argument to define where to save our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(demo_clean, <span class="dt">file =</span> <span class="st">&quot;outputs/filtered_demographic_data.RData&quot;</span>)</code></pre></div>
<p>When it comes to loading RData files back up, we just need to use the <code>load()</code> function from baseR. Bear in mind that the names of the objects you’ve saved in the data file will be the same ones you see on loading, so use informative names! Here, we just need to specify the path from which to load our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;outputs/filtered_demographic_data.RData&quot;</span>)</code></pre></div>
</div>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">5.12</span> Exercises</h2>
<p>We’ll try some exercises to get you used to using all of the functions we’ve discussed here.</p>
<p>For these exercises we’ll a simulated data set I created in the <strong>data_generation</strong> folder. This data was saved as a tibble in the RData file, so we just use <code>load()</code> to open this data into R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load libraries</span>
<span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)

<span class="co"># load data</span>
<span class="kw">load</span>(<span class="st">&quot;inputs/sim_data.RData&quot;</span>)</code></pre></div>
<p>This data set looks at reaction times in spotting a target when people have had caffeine or not, and when they respond with their dominant or non-dominant hand. This data set is entirely made up, so we can’t be sure how realistic these results are.</p>
<p>First, you should take a look at your data to understand it. A simple first step is to see what the data table itself looks like.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(data)</code></pre></div>
<pre><code>## Observations: 100
## Variables: 5
## $ subject  &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16...
## $ age      &lt;int&gt; 34, 56, 23, 53, 44, 21, 55, 47, 29, 31, 35, 56, 34, 6...
## $ caffeine &lt;fct&gt; no, no, no, no, no, no, no, no, no, no, no, no, no, n...
## $ response &lt;fct&gt; non-dominant, non-dominant, non-dominant, non-dominan...
## $ DV       &lt;dbl&gt; 398.6627, 396.3824, 400.1234, 401.9182, 397.6403, 398...</code></pre>
<p>After this, we should make a more detailed plot to understand the general trends in the data.</p>
<div id="question-1-4" class="section level3">
<h3><span class="header-section-number">5.12.1</span> Question 1</h3>
<p>Make a plot of your data which looks at the relationship beween <strong>caffeine</strong> and <strong>DV</strong>. Split this plot into two to show the differences across the two response conditions.</p>
<p>What are the general trends in the data?</p>
</div>
<div id="question-2-4" class="section level3">
<h3><span class="header-section-number">5.12.2</span> Question 2</h3>
<p>Subset your data to remove the ages from the data set.</p>
</div>
<div id="question-3-4" class="section level3">
<h3><span class="header-section-number">5.12.3</span> Question 3</h3>
<p>Rename the <strong>DV</strong> column to something more informative, like <strong>reaction_time</strong></p>
</div>
<div id="question-4-4" class="section level3">
<h3><span class="header-section-number">5.12.4</span> Question 4</h3>
<p>What if we care about differences in the ages? Let’s assume we have a prediction that caffeine only has an effect on those above 30 years of age. Subset your data to just those above 30 years of age.</p>
</div>
<div id="question-5-4" class="section level3">
<h3><span class="header-section-number">5.12.5</span> Question 5</h3>
<p>Rearrange the data set by age, starting from the <strong>highest</strong> age.</p>
</div>
<div id="question-6-4" class="section level3">
<h3><span class="header-section-number">5.12.6</span> Question 6</h3>
<p>Calculate mean centered scores for each subject and add these to a new column called <strong>DV_c</strong> (DV, centered). The formula for this is <code>subjects_score - mean(all_scores)</code>. Can you work out what the mean should (approximately) be?</p>
</div>
<div id="question-7-4" class="section level3">
<h3><span class="header-section-number">5.12.7</span> Question 7</h3>
<p>Let’s assume we have a prediction that response times should be slower above 30 years of age. Create a new column, <strong>age_group</strong> that puts participants into two groups <strong>30_or_under</strong>, and <strong>above_30</strong>.</p>
<p><em>Hint</em>: Look up the <code>ifelse()</code> function using <code>?ifelse()</code> to see how you can use logical operations to achieve this.</p>
</div>
<div id="question-8-4" class="section level3">
<h3><span class="header-section-number">5.12.8</span> Question 8</h3>
<p>Calculate the mean, standard deviation, and number of observations for each group.</p>
</div>
<div id="question-9-4" class="section level3">
<h3><span class="header-section-number">5.12.9</span> Question 9</h3>
<p>Calculate the mean, standard deviation, and number of observations for each group, excluding those with the 3 highest ages from each group.</p>
</div>
<div id="question-10-3" class="section level3">
<h3><span class="header-section-number">5.12.10</span> Question 10</h3>
<p>Take the data and do this all together:</p>
<ol style="list-style-type: decimal">
<li>Rename the DV column to <strong>response_time</strong>.</li>
<li>Remove any observations where the age of the participant is above 60.</li>
<li>Combine the two columns, age and caffeine, into one column called condition. Hint: Use <code>paste()</code> here. Use an underscore separator for the condition names.</li>
<li>Remove the caffeine and response columns and reorder the data so we have subject first, followed by age, condition, and response_time.</li>
<li>Calculate mean, standard deviation, and n for condition on the response time column. Call your new column names anything sensible.</li>
</ol>
</div>
<div id="question-11-1" class="section level3">
<h3><span class="header-section-number">5.12.11</span> Question 11</h3>
<p>Was there any point in us combining the two factors into a single condition column? Do the same process above without making a summary of the data. Feed this data into a boxplot, with condition on the x-axis, and response_time on the y-axis.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-dplyr">
<p>Wickham, Hadley, Romain Francois, Lionel Henry, and Kirill Müller. 2017. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
<div id="ref-R-tidyverse">
<p>Wickham, Hadley. 2017. <em>Tidyverse: Easily Install and Load the ’Tidyverse’</em>. <a href="https://CRAN.R-project.org/package=tidyverse" class="uri">https://CRAN.R-project.org/package=tidyverse</a>.</p>
</div>
<div id="ref-R-lubridate">
<p>Grolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="http://www.jstatsoft.org/v40/i03/" class="uri">http://www.jstatsoft.org/v40/i03/</a>.</p>
</div>
<div id="ref-R-readr">
<p>Wickham, Hadley, Jim Hester, and Romain Francois. 2017. <em>Readr: Read Rectangular Text Data</em>. <a href="https://CRAN.R-project.org/package=readr" class="uri">https://CRAN.R-project.org/package=readr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-manipulation-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="traditional-tests.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
